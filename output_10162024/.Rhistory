results[[1]]
load("C:/Users/xmao6/Desktop/Bluhive_Output/output_11172023_ae/summary_CV_PGD_LASSO_MLE_sim_10001555175_11172023.rda")
load("C:/Users/xmao6/Desktop/Bluhive_Output/output_11192023_ae/summary_CV_PGD_LASSO_MLE_sim_10001555175_11172023.rda")
setwd("C:/Users/xmao6/AppData/Local/Temp/scp27997/gpfs/fs1/home/xmao6/USMART/output_10152024")
for (ind in 1:500){
filename = paste0("USMART_sim", 10000+ind, "setting_1.rda")
dataname = paste0("results", ind)
load(filename)
assign(dataname, results)
}
load("C:/Users/xmao6/Desktop/USMART_blue/output_10152024/USMART_sim10002setting_1.rda")
for (ind in 1:500){
filename = paste0("USMART_sim", 10000+ind, "setting_1.rda")
dataname = paste0("results", ind)
load(filename)
assign(dataname, results)
}
View(results1)
View(results1)
View(results)
View(results)
setwd("C:/Users/xmao6/AppData/Local/Temp/scp27997/gpfs/fs1/home/xmao6/USMART/output_10152024")
setwd("C:/Users/xmao6/AppData/Local/Temp/scp27997/gpfs/fs1/home/xmao6/USMART/output_10152024")
for (ind in 1:500){
filename = paste0("USMART_sim", 10000+ind, "setting_1.rda")
dataname = paste0("results", ind)
load(filename)
assign(dataname, results)
}
file.exists("USMART_sim10002setting_1.rda")
load("USMART_sim10002setting_1.rda")
setwd("C:/Users/xmao6/Desktop/USMART_blue/output_10152024")
for (ind in 1:500){
filename = paste0("USMART_sim", 10000+ind, "setting_1.rda")
dataname = paste0("results", ind)
load(filename)
assign(dataname, results)
}
for (ind in 1:500) {
current_result = get(paste0("results", ind))
if (is.na(current_result)) {
next
}
print(current_result[[1]])
}
View(results474)
eva.ar1 = current_result[[1]][[1]]
eva.ar1
results[[2]]
results9[[2]]
results64
results1[[2]][[1]]
results2[[1]]
truth = matrix(NA, nrow = nsim, ncol = 6)
for (ind in 1:nsim) {
current_result = get(paste0("results", ind))
if (length(is.na(current_result))!=1 ) {
truth[ind,] = current_result[[1]][[5]]
}
}
nsim = 500
truth = matrix(NA, nrow = nsim, ncol = 6)
for (ind in 1:nsim) {
current_result = get(paste0("results", ind))
if (length(is.na(current_result))!=1 ) {
truth[ind,] = current_result[[1]][[5]]
}
}
truth = as.numeric(truth)
summary(truth)
?summary
truth = as.data.frame(as.numeric(truth))
summary(truth)
colMeans(truth)
colVar(truth)
truth = matrix(NA, nrow = nsim, ncol = 6)
for (ind in 1:nsim) {
current_result = get(paste0("results", ind))
if (length(is.na(current_result))!=1 ) {
truth[ind,] = current_result[[1]][[5]]
}
}
truth = as.numeric(truth)
colMeans(truth)
truth = matrix(NA, nrow = nsim, ncol = 6)
for (ind in 1:nsim) {
current_result = get(paste0("results", ind))
if (length(is.na(current_result))!=1 ) {
truth[ind,] = current_result[[1]][[5]]
}
}
sum(truth[,4] == "23")
head(truth)
sum(truth[,4] == "32")
truth(1,4)=="32"
truth[1,4]=="32"
truth[,4] == "32"
truth[,4] == "32"
sum(na.omit(truth[,4] == "32"))
ct_avaiable = 0
for (ind in 1:nsim) {
current_result = get(paste0("results", ind))
if (length(is.na(current_result))!=1 ) {
truth[ind,] = current_result[[1]][[5]]
ct_avaiable = ct_avaiable + 1
}
}
ct_avaiable
sum(na.omit(truth[,4] == "32"))
sum(na.omit(truth[,5] == "32"))
sum(na.omit(truth[,6] == "32"))
eva.ar1 = current_result[[1]][[1]]
eva.ar2 = current_result[[1]][[2]]
eva.ar3 = current_result[[1]][[3]]
eva.ar4 = current_result[[1]][[4]]
eva = rbind(eva.ar1, eva.ar2, eva.ar3, eva.ar4)
eva
for (ind in 1:nsim) {
current_result = get(paste0("results", ind))
if (length(is.na(current_result))!=1 ) {
eva.ar1 = current_result[[1]][[1]]
eva.ar2 = current_result[[1]][[2]]
eva.ar3 = current_result[[1]][[3]]
eva.ar4 = current_result[[1]][[4]]
eva.summary[ind,,] = rbind(eva.ar1, eva.ar2, eva.ar3, eva.ar4)
}
}
eva.summary = array(NA, dim=c(nsim, 4, 6))
for (ind in 1:nsim) {
current_result = get(paste0("results", ind))
if (length(is.na(current_result))!=1 ) {
eva.ar1 = current_result[[1]][[1]]
eva.ar2 = current_result[[1]][[2]]
eva.ar3 = current_result[[1]][[3]]
eva.ar4 = current_result[[1]][[4]]
eva.summary[ind,,] = rbind(eva.ar1, eva.ar2, eva.ar3, eva.ar4)
}
}
eva.summary[2,,]
eva_averaged = apply(eva.summary, c(2, 3), mean)
eva_averaged
View(eva)
eva_averaged = apply(na.omit(eva.summary), c(2, 3), mean)
na_check <- is.na(eva.summary)
na_check
na_positions <- which(na_check, arr.ind = TRUE)
na_positions
for (ind in 1:nsim) {
current_result = get(paste0("results", ind))
if (length(is.na(current_result))!=1 ) {
eva.ar1 = current_result[[1]][[1]]
eva.ar2 = current_result[[1]][[2]]
eva.ar3 = current_result[[1]][[3]]
eva.ar4 = current_result[[1]][[4]]
eva.summary[ind,,] = rbind(eva.ar1, eva.ar2, eva.ar3, eva.ar4)
print(rbind(eva.ar1, eva.ar2, eva.ar3, eva.ar4))
}
}
summary(eva.summary[,1,1])
summary(eva.summary[,2,1])  ## ar2 prop_best_trt
eva.summary = array(NA, dim=c(nsim, 4, 6))
for (ind in 1:nsim) {
current_result = get(paste0("results", ind))
if (length(is.na(current_result))!=1 ) {
eva.ar1 = current_result[[1]][[1]]
eva.ar2 = current_result[[1]][[2]]
eva.ar3 = current_result[[1]][[3]]
eva.ar4 = current_result[[1]][[4]]
eva.summary[ind,,] = rbind(eva.ar1, eva.ar2, eva.ar3, eva.smart)
print(rbind(eva.ar1, eva.ar2, eva.ar3, eva.smart))
}
}
eva.summary = array(NA, dim=c(nsim, 4, 6))
for (ind in 1:nsim) {
current_result = get(paste0("results", ind))
if (length(is.na(current_result))!=1 ) {
eva.ar1 = current_result[[1]][[1]]
eva.ar2 = current_result[[1]][[2]]
eva.ar3 = current_result[[1]][[3]]
eva.smart = current_result[[1]][[4]]
eva.summary[ind,,] = rbind(eva.ar1, eva.ar2, eva.ar3, eva.smart)
print(rbind(eva.ar1, eva.ar2, eva.ar3, eva.smart))
}
}
summary(eva.summary[,1,1])  ## ar1 prop_best_trt
summary(eva.summary[,2,1])  ## ar2 prop_best_trt
summary(eva.summary[,3,1])  ## ar3 prop_best_trt
summary(eva.summary[,4,1])  ## smart prop_best_trt
summary(eva.summary[,1,2])  ## ar1 overall_ut_sample
summary(eva.summary[,2,2])  ## ar2 overall_ut_sample
summary(eva.summary[,3,2])  ## ar3 overall_ut_sample
summary(eva.summary[,4,2])  ## smart overall_ut_sample
summary(eva.summary[,1,3])  ## ar1 resp_rate
summary(eva.summary[,2,3])  ## ar2 resp_rate
summary(eva.summary[,3,3])  ## ar3 resp_rate
summary(eva.summary[,4,3])  ## smart resp_rate
summary(eva.summary[,1,4])  ## ar1 best_reg_G
summary(as.factor(eva.summary[,1,4]))  ## ar1 best_reg_G
summary(as.factor(eva.summary[,1,4]))  ## ar1 best_reg_G
summary(as.factor(eva.summary[,2,4]))  ## ar2 best_reg_G
summary(as.factor(eva.summary[,3,4]))  ## ar3 best_reg_G
summary(as.factor(eva.summary[,4,4]))  ## ar4 best_reg_G
summary(eva.summary[,1,1])  ## ar1 prop_best_trt
summary(eva.summary[,2,1])  ## ar2 prop_best_trt
summary(eva.summary[,3,1])  ## ar3 prop_best_trt
summary(eva.summary[,4,1])  ## smart prop_best_trt
summary(eva.summary[,1,2])  ## ar1 overall_ut_sample
summary(eva.summary[,2,2])  ## ar2 overall_ut_sample
summary(eva.summary[,3,2])  ## ar3 overall_ut_sample
summary(eva.summary[,4,2])  ## smart overall_ut_sample
summary(eva.summary[,1,3])  ## ar1 resp_rate
summary(eva.summary[,2,3])  ## ar2 resp_rate
summary(eva.summary[,3,3])  ## ar3 resp_rate
summary(eva.summary[,4,3])  ## smart resp_rate
prop_best1=eva.summary[,1,1]
prop_best2=eva.summary[,2,1]
prop_best3=eva.summary[,3,1]
prop_best4=eva.summary[,4,1]
prop_best1=eva.summary[,1,1]
prop_best2=eva.summary[,2,1]
prop_best3=eva.summary[,3,1]
prop_best4=eva.summary[,4,1]
data <- data.frame(
ar1 = prop_best1,
ar2 = prop_best2,
ar3 = prop_best3,
smart = prop_best4
)
# Create a box plot
boxplot(data,
main = "Side-by-Side Box Plots",
xlab = "Groups",
ylab = "Values",
col = c("lightblue", "lightgreen", "lightpink", "lightyellow"))
# Create a box plot
boxplot(data,
main = "Proportion Treated with the Best Treatment",
xlab = "Groups",
ylab = "Values",
col = c("lightblue", "lightgreen", "lightpink", "lightyellow"))
o_ut1=eva.summary[,1,2]
o_ut2=eva.summary[,2,2]
o_ut3=eva.summary[,3,2]
o_ut4=eva.summary[,4,2]
data <- data.frame(
ar1 = o_ut1,
ar2 = o_ut2,
ar3 = o_ut3,
smart = o_ut4
)
# Create a box plot
boxplot(data,
main = "Proportion Treated with the Best Treatment",
xlab = "Groups",
ylab = "Values",
col = c("lightblue", "lightgreen", "lightpink", "lightyellow"))
resp1=eva.summary[,1,3]
resp2=eva.summary[,2,3]
resp3=eva.summary[,3,3]
resp4=eva.summary[,4,3]
data <- data.frame(
ar1 = resp1,
ar2 = resp2,
ar3 = resp3,
smart = resp4
)
# Create a box plot
boxplot(data,
main = "Overall Response Rate",
xlab = "Groups",
ylab = "Values",
col = c("lightblue", "lightgreen", "lightpink", "lightyellow"))
prop_best1=eva.summary[,1,1]
prop_best2=eva.summary[,2,1]
prop_best3=eva.summary[,3,1]
prop_best4=eva.summary[,4,1]
data <- data.frame(
ar1 = prop_best1,
ar2 = prop_best2,
ar3 = prop_best3,
smart = prop_best4
)
# Create a box plot
boxplot(data,
main = "Proportion Treated with the Best Treatment",
xlab = "Groups",
ylab = "Values",
col = c("lightblue", "lightgreen", "lightpink", "lightyellow"))
o_ut1=eva.summary[,1,2]
o_ut2=eva.summary[,2,2]
o_ut3=eva.summary[,3,2]
o_ut4=eva.summary[,4,2]
data <- data.frame(
ar1 = o_ut1,
ar2 = o_ut2,
ar3 = o_ut3,
smart = o_ut4
)
# Create a box plot
boxplot(data,
main = "Overall Utility",
xlab = "Groups",
ylab = "Values",
col = c("lightblue", "lightgreen", "lightpink", "lightyellow"))
resp1=eva.summary[,1,3]
resp2=eva.summary[,2,3]
resp3=eva.summary[,3,3]
resp4=eva.summary[,4,3]
data <- data.frame(
ar1 = resp1,
ar2 = resp2,
ar3 = resp3,
smart = resp4
)
# Create a box plot
boxplot(data,
main = "Overall Response Rate",
xlab = "Groups",
ylab = "Values",
col = c("lightblue", "lightgreen", "lightpink", "lightyellow"))
summary(as.factor(eva.summary[,1,4]))  ## ar1 best_reg_G
summary(as.factor(eva.summary[,2,4]))  ## ar2 best_reg_G
summary(as.factor(eva.summary[,3,4]))  ## ar3 best_reg_G
summary(as.factor(eva.summary[,4,4]))  ## smart best_reg_G
summary(as.factor(eva.summary[,1,5]))  ## ar1 best_reg_NIPWE
summary(as.factor(eva.summary[,2,5]))  ## ar2 best_reg_NIPWE
summary(as.factor(eva.summary[,3,5]))  ## ar3 best_reg_NIPWE
summary(as.factor(eva.summary[,4,5]))  ## smart best_reg_NIPWE
summary(as.factor(eva.summary[,1,6]))  ## ar1 best_reg_DR
summary(as.factor(eva.summary[,2,6]))  ## ar2 best_reg_DR
summary(as.factor(eva.summary[,3,6]))  ## ar3 best_reg_DR
summary(as.factor(eva.summary[,4,6]))  ## smart best_reg_DR
rm(list=ls())
setwd("C:/Users/xmao6/Desktop/USMART_blue/output_10162024")
nsim = 500
for (ind in 1:nsim){
filename = paste0("USMART_sim", 10000+ind, "setting_1.rda")
dataname = paste0("results", ind)
load(filename)
assign(dataname, results)
}
truth = matrix(NA, nrow = nsim, ncol = 6)
ct_avaiable = 0
for (ind in 1:nsim) {
current_result = get(paste0("results", ind))
if (length(is.na(current_result))!=1 ) {
truth[ind,] = current_result[[1]][[5]]
ct_avaiable = ct_avaiable + 1
}
}
ct_avaiable
sum(na.omit(truth[,4] == "32"))
sum(na.omit(truth[,5] == "32"))
sum(na.omit(truth[,6] == "32"))
eva.summary = array(NA, dim=c(nsim, 4, 6))
for (ind in 1:nsim) {
current_result = get(paste0("results", ind))
if (length(is.na(current_result))!=1 ) {
eva.ar1 = current_result[[1]][[1]]
eva.ar2 = current_result[[1]][[2]]
eva.ar3 = current_result[[1]][[3]]
eva.smart = current_result[[1]][[4]]
eva.summary[ind,,] = rbind(eva.ar1, eva.ar2, eva.ar3, eva.smart)
print(rbind(eva.ar1, eva.ar2, eva.ar3, eva.smart))
}
}
prop_best1=eva.summary[,1,1]
prop_best2=eva.summary[,2,1]
prop_best3=eva.summary[,3,1]
prop_best4=eva.summary[,4,1]
data <- data.frame(
ar1 = prop_best1,
ar2 = prop_best2,
ar3 = prop_best3,
smart = prop_best4
)
# Create a box plot
boxplot(data,
main = "Proportion Treated with the Best Treatment",
xlab = "Groups",
ylab = "Values",
col = c("lightblue", "lightgreen", "lightpink", "lightyellow"))
o_ut1=eva.summary[,1,2]
o_ut2=eva.summary[,2,2]
o_ut3=eva.summary[,3,2]
o_ut4=eva.summary[,4,2]
data <- data.frame(
ar1 = o_ut1,
ar2 = o_ut2,
ar3 = o_ut3,
smart = o_ut4
)
# Create a box plot
boxplot(data,
main = "Overall Utility",
xlab = "Groups",
ylab = "Values",
col = c("lightblue", "lightgreen", "lightpink", "lightyellow"))
resp1=eva.summary[,1,3]
resp2=eva.summary[,2,3]
resp3=eva.summary[,3,3]
resp4=eva.summary[,4,3]
data <- data.frame(
ar1 = resp1,
ar2 = resp2,
ar3 = resp3,
smart = resp4
)
# Create a box plot
boxplot(data,
main = "Overall Response Rate",
xlab = "Groups",
ylab = "Values",
col = c("lightblue", "lightgreen", "lightpink", "lightyellow"))
summary(eva.summary[,1,1])  ## ar1 prop_best_trt
summary(eva.summary[,2,1])  ## ar2 prop_best_trt
summary(eva.summary[,3,1])  ## ar3 prop_best_trt
summary(eva.summary[,4,1])  ## smart prop_best_trt
summary(eva.summary[,1,2])  ## ar1 overall_ut_sample
summary(eva.summary[,2,2])  ## ar2 overall_ut_sample
summary(eva.summary[,3,2])  ## ar3 overall_ut_sample
summary(eva.summary[,4,2])  ## smart overall_ut_sample
summary(eva.summary[,1,3])  ## ar1 resp_rate
summary(eva.summary[,2,3])  ## ar2 resp_rate
summary(eva.summary[,3,3])  ## ar3 resp_rate
summary(eva.summary[,4,3])  ## smart resp_rate
summary(as.factor(eva.summary[,1,4]))  ## ar1 best_reg_G
summary(as.factor(eva.summary[,2,4]))  ## ar2 best_reg_G
summary(as.factor(eva.summary[,3,4]))  ## ar3 best_reg_G
summary(as.factor(eva.summary[,4,4]))  ## smart best_reg_G
summary(as.factor(eva.summary[,1,5]))  ## ar1 best_reg_NIPWE
summary(as.factor(eva.summary[,2,5]))  ## ar2 best_reg_NIPWE
summary(as.factor(eva.summary[,3,5]))  ## ar3 best_reg_NIPWE
summary(as.factor(eva.summary[,4,5]))  ## smart best_reg_NIPWE
summary(as.factor(eva.summary[,1,6]))  ## ar1 best_reg_DR
summary(as.factor(eva.summary[,2,6]))  ## ar2 best_reg_DR
summary(as.factor(eva.summary[,3,6]))  ## ar3 best_reg_DR
summary(as.factor(eva.summary[,4,6]))  ## smart best_reg_DR
# Create a box plot
boxplot(data,
main = "Proportion Treated with the Best Treatment",
xlab = "Groups",
ylab = "Values",
col = c("lightblue", "lightgreen", "lightpink", "lightyellow"))
# Create a box plot
boxplot(data,
main = "Overall Utility",
xlab = "Groups",
ylab = "Values",
col = c("lightblue", "lightgreen", "lightpink", "lightyellow"))
data <- data.frame(
ar1 = o_ut1,
ar2 = o_ut2,
ar3 = o_ut3,
smart = o_ut4
)
# Create a box plot
boxplot(data,
main = "Overall Utility",
xlab = "Groups",
ylab = "Values",
col = c("lightblue", "lightgreen", "lightpink", "lightyellow"))
resp1=eva.summary[,1,3]
data <- data.frame(
ar1 = resp1,
ar2 = resp2,
ar3 = resp3,
smart = resp4
)
# Create a box plot
boxplot(data,
main = "Overall Response Rate",
xlab = "Groups",
ylab = "Values",
col = c("lightblue", "lightgreen", "lightpink", "lightyellow"))
eva.summary = array(NA, dim=c(nsim, 4, 6))
for (ind in 1:nsim) {
current_result = get(paste0("results", ind))
if (length(is.na(current_result))!=1 ) {
eva.ar1 = current_result[[1]][[1]]
eva.ar2 = current_result[[1]][[2]]
eva.ar3 = current_result[[1]][[3]]
eva.smart = current_result[[1]][[4]]
eva.summary[ind,,] = rbind(eva.ar1, eva.ar2, eva.ar3, eva.smart)
print(rbind(eva.ar1, eva.ar2, eva.ar3, eva.smart))
}
}
summary(as.factor(eva.summary[,1,4]))  ## ar1 best_reg_G
summary(as.factor(eva.summary[,2,4]))  ## ar2 best_reg_G
summary(as.factor(eva.summary[,3,4]))  ## ar3 best_reg_G
summary(as.factor(eva.summary[,4,4]))  ## smart best_reg_G
summary(as.factor(eva.summary[,1,5]))  ## ar1 best_reg_NIPWE
summary(as.factor(eva.summary[,2,5]))  ## ar2 best_reg_NIPWE
summary(as.factor(eva.summary[,3,5]))  ## ar3 best_reg_NIPWE
eva.summary[,1,5]
View(results7)
